<% include templates/sidebar %>
<% include templates/topbar %>
            <!-- End Navbar -->
            <div class="panel-header">
                <div class="header text-center">
                    <h1 class="title">Auto Supply</h1>
                </div>
            </div>
            <div class="content">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card ">
                            <div class="card-header">
                                    <button class="btn btn-primary" style="float:right" type="button" data-toggle="modal" data-target="#myModal1">
                                        Add Auto Supply
                                    </button>
                            <div class="card-body ">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead class=" text-primary">                                            
                                            <th>Description</th>
                                            <th>Category</th>
                                            <th>Quantity</th>
                                            <th>Action</th>
                                        </thead>
                                         <% auto_supplies.forEach( cur => { %>                                            
                                            <tr id="r<%= cur.asupply_id %>">
                                                <td id="id" hidden><%= cur.asupply_id %></td>
                                                <td id="desc"><%= cur.asupply_desc %></td> 
                                                <td id="catdesc"><%= cur.ascategory_desc %></td>
                                                <td id="quant"><%= cur.asupply_quantity %></td>
                                                <td id="catid" hidden><%= cur.ascategory_id %></td>
                                            <td>
                                                <button class="btn btn-default" type="button"data-toggle="modal" data-target="#myModal2" onclick="edit( 'r<%= cur.asupply_id %>' )">
                                                    <i class="now-ui-icons design-2_ruler-pencil"></i> 
                                                </button>
                                                    <button class="btn btn-danger" type="button"data-toggle="modal" data-target="#myModal3" onclick="del( 'r<%= cur.asupply_id %>' )">
                                                        <i class="now-ui-icons ui-1_simple-remove"></i>
                                                    </button>
                                            </td>
                                        </tr>
                                        <% }) %>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal -->
                    <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <form method="POST" action="/admin/maintenance/autosupply">
                                    <div class="modal-header">
                                        <h5>Add Auto Supply</h5>
                                            <button style="background: transparent; border:none;" type="button" data-dismiss="modal" aria-label="Close">
                                            <span aria=-hidden="true" class="now-ui-icons ui-1_simple-remove"></span>
                                            </button>
                                    </div>                                
                                    <div class="modal-body">
                                        <fieldset>
                                            <div class="col-lg-12 control-label">
                                                <div class="form-group">
                                                    <label>Category</label>
                                                        <select name="cat" class="form-control" id="type" name="dtype">
                                                            <% auto_supply_categories.forEach( cur => { %>
                                                            <option value="<%= cur.ascategory_id %>"><%= cur.ascategory_desc %></option>
                                                            <% }) %>
                                                        </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-10 control-label">Description</label>
                                                <div class="col-lg-12">
                                                    <input name="desc" type="text" class="form-control" placeholder="Description">
                                                </div></br>  
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-10 control-label">Quantity</label>
                                                <div class="col-lg-12">
                                                    <input name="quant" type="number" class="form-control" placeholder="Quantity">
                                                </div></br>  
                                            </div>
                                            <hr>
                                        </fieldset>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" style="margin-left:80%" class="btn btn-primary btn-fill pull-right"> Submit </button>
                                    </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <form id="edit_form" method="POST" action="/admin/maintenance/autosupply/edit">
                                    <input type="hidden" name="id">
                                    <div class="modal-header">
                                        <h5>Edit Auto Supply</h5>
                                            <button style="background: transparent; border:none;" type="button" data-dismiss="modal" aria-label="Close">
                                            <span aria=-hidden="true" class="now-ui-icons ui-1_simple-remove"></span>
                                            </button>
                                    </div>
                                    <div class="modal-body">
                                        <fieldset>
                                            <div class="col-lg-12 control-label">
                                                <div class="form-group">
                                                    <label>Category</label>
                                                        <select name="cat" class="form-control" id="type" name="dtype">
                                                            <% auto_supply_categories.forEach( cur => { %>
                                                            <option value="<%= cur.ascategory_id %>"><%= cur.ascategory_desc %></option>
                                                            <% }) %>
                                                        </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-10 control-label">Description</label>
                                                <div class="col-lg-12">
                                                    <input name="desc" type="text" class="form-control" placeholder="Description">
                                                </div></br>  
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-10 control-label">Quantity</label>
                                                <div class="col-lg-12">
                                                    <input name="quant" type="number" class="form-control" placeholder="Quantity">
                                                </div></br>  
                                            </div>
                                            <hr>
                                        </fieldset>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" style="margin-left:80%" class="btn btn-primary btn-fill pull-right"> Submit </button>
                                    </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- End of Modal -->
            <footer class="footer">
                <div class="container-fluid">    
                </div>
            </footer>
            </div>
    </div>

    <script language="javascript">
        function edit( par ) {
            ch = document.getElementById( par ).children
            el = document.getElementById( "edit_form" ).elements

            el[ "id" ].value = par.split( "r" )[1]
            el[ "desc" ].value = ch[ "desc" ].innerHTML
            el[ "cat" ].value = ch[ "catid" ].innerHTML
            el[ "quant" ].value = ch[ "quant" ].innerHTML
        }

        function del( par ) {
            id = par.split( "r" )[1]
            var form = document.createElement( "form" )
            form.setAttribute( "method", "post" )
            form.setAttribute( "action", "/admin/maintenance/autosupply/delete" )
            var inp = document.createElement( "input" )
            inp.setAttribute( "type", "hidden" )
            inp.setAttribute( "name", "id" )
            inp.setAttribute( "value", id )
            form.appendChild( inp )
            document.body.appendChild( form )
            form.submit()
        }
    </script>
</body>
<!--   Core JS Files   -->
<script src="/assets/js/core/jquery.min.js"></script>
<script src="/assets/js/core/popper.min.js"></script>
<script src="/assets/js/core/bootstrap.min.js"></script>
<script src="/assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!-- Chart JS -->
<script src="/assets/js/plugins/chartjs.min.js"></script>
<!--  Notifications Plugin    -->
<script src="/assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="/assets/js/now-ui-dashboard.js?v=1.0.1"></script>
<!-- Now Ui Dashboard DEMO methods, don't include it in your project! -->
<script src="/assets/demo/demo.js"></script>
<script>
    $(document).ready(function() {
        // Javascript method's body can be found in assets/js/demos.js
        demo.initGoogleMaps();
    });
</script>

</html>
